(function ($R) {
    $R.add('plugin', 'footnotebutton', {

        //  i18n
        translations: {
            en: {
                "footnote": 'Footnote'
            },
            de: {
                "footnote": 'Fu√ünote'
            }
            //  TODO: add other translations
        },

        //  plugin construct
        init: function (app) {
            //  define redactor app
            this.app = app;
            //  define services
            this.lang = app.lang;
            this.toolbar = app.toolbar;
            this.inline = app.inline;
        },

        //  button init
        start: function () {
            //  add the button to the toolbar
            this.button = this.toolbar.addButton('footnotebutton', {
                //  set label
                title: this.lang.get('footnote'),
                //  add callback function for the button to be invoked on each click
                api: 'plugin.footnotebutton.formatSup',
                //  set icon (see also vendor/craftcms/redactor/lib/redactor/redactor.css for all icon-classes)
                icon: '<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" width="25" height="15" viewBox="0 0 500 320" id="svg2" version="1.1">' +
                    '<g transform="translate(0,-30)">' +
                    '<path d="m 120.25651,106.98909 31.21745,209.71391 -55.828718,0 -2.720193,-37.6941 -19.559482,0 -3.238324,37.6941 -56.476385,0 27.72006,-209.71391 78.885592,0 z M 91.370653,241.83293 q -4.145055,-35.62157 -8.290111,-87.9529 -8.290112,60.10331 -10.36264,87.9529 l 18.652751,0 z" />' +
                    '<path d="m 211.57727,106.98909 0,49.61113 q 6.47665,-7.51291 14.37816,-11.13983 8.03105,-3.75646 17.35742,-3.75646 10.75124,0 18.65275,3.36786 7.90151,3.36786 12.04657,9.45591 4.14506,6.08805 4.92225,11.91703 0.90674,5.82899 0.90674,24.87034 l 0,77.46073 q 0,18.91181 -2.59066,28.23819 -2.46113,9.19684 -11.78751,16.06209 -9.32637,6.73571 -22.15014,6.73571 -9.19684,0 -17.22789,-4.01552 -7.90151,-4.01552 -14.50769,-12.04657 l -3.36786,12.9533 -48.96347,0 0,-209.71391 52.33133,0 z m 15.93256,86.65757 q 0,-13.3419 -1.68393,-17.35742 -1.68393,-4.14506 -6.60619,-4.14506 -4.79272,0 -6.21758,3.62693 -1.42486,3.49739 -1.42486,17.87555 l 0,74.09287 q 0,13.86003 1.55439,17.74602 1.68393,3.88599 6.47665,3.88599 4.92226,0 6.34712,-4.01552 1.5544,-4.01552 1.5544,-19.30042 l 0,-72.40894 z" />' +
                    '<path d="m 412.74201,209.70875 -49.35207,0 0,-19.81855 q 0,-10.36264 -1.68393,-13.98956 -1.68393,-3.75646 -6.21759,-3.75646 -4.53365,0 -6.08805,3.23833 -1.55439,3.23832 -1.55439,14.50769 l 0,81.08766 q 0,9.19684 2.33159,13.86003 2.33159,4.53365 6.86525,4.53365 5.31085,0 7.12431,-4.79272 1.943,-4.79272 1.943,-18.13462 l 0,-20.46621 46.63188,0 q -0.12954,20.59574 -1.5544,30.95838 -1.29533,10.23311 -8.67871,21.11388 -7.25385,10.75124 -19.04135,16.32116 -11.7875,5.44038 -29.14492,5.44038 -22.15015,0 -35.10344,-7.51291 -12.9533,-7.64245 -18.39369,-21.24341 -5.31085,-13.7305 -5.31085,-38.8599 l 0,-48.83394 q 0,-21.89107 4.40412,-33.03091 4.40412,-11.13984 18.78228,-19.81855 14.37817,-8.80824 34.97391,-8.80824 20.46621,0 34.97391,8.67871 14.50769,8.67871 19.30042,21.89108 4.79272,13.21236 4.79272,37.43503 z" />' +
                    '<path d="m 486.34914,53.30414 0,157.28544 -39.24849,0 0,-84.32598 q 0,-18.26415 -0.87435,-21.95584 -0.87435,-3.69169 -4.85749,-5.537539 -3.88599,-1.942995 -17.48695,-1.942995 l -3.88599,0 0,-18.361302 Q 448.46074,72.34549 463.2275,53.30414 l 23.12164,0 z" />' +
                    '</g>' +
                    '</svg>'
            });
        },

        //  on button toggle
        formatSup: function () {
            this.inline.format('sup');
        }

    });
})(Redactor);
